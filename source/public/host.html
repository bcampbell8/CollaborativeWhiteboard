<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="viewport">
    <title>Host</title>
</head>

<body>
<iframe id="iframe" allowfullscreen="false" src="/body.html" frameBorder="0"></iframe>
<style>
#iframe {
	width: 98vw;
	height: 95.9vh;
}
</style>
<script>
// distict host-only code for websockets
// everything else is abstracted into other files and imported accordingly

const socket = new WebSocket("ws://" + window.location.hostname + ":2210");
socket.onopen = function(event) {
	console.log("socket opened");
	// ensure proper serialisation by checking json object has stringify method call around it before sending
	socket.send(JSON.stringify({ action: "open", code: null, info: null }));
};
socket.onmessage = function(event) {
	// alert("msg recieved from server: " + event.data);
}


// canvas must be serialised and transmitted over the network from this scriptfile
// the event listener allows this file to be updated once new lines have been drawn inside the iframe
window.document.addEventListener("iframeCanvas", (e) => {
	console.log(e.detail); // e is an object with property `detail` which contains the serialised canvas
}, false);

</script>
</body>
</html>
