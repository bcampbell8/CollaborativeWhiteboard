<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="viewport">
    <title>Host</title>
</head>

<body>
<iframe id="iframe" allowfullscreen="false" src="/body.html" frameBorder="0"></iframe>
<style>
#iframe {
	width: 98vw;
	height: 95.9vh;
}
</style>
<script>
// distict host-only code for websockets
// everything else is abstracted into other files and imported accordingly

const socket = new WebSocket("ws://" + window.location.hostname + ":2210");
socket.onopen = function(event) {
	console.log("socket opened");
	// ensure proper serialisation by checking json object has stringify method call around it before sending
	socket.send(JSON.stringify({ action: "open", code: null, info: null }));
};
socket.onmessage = function(event) {
	// room code is generated by server and send to host through the websockets
	// alert("msg recieved from server: " + event.data);
}


let currentLocation;

let iframe = document.getElementById("iframe");
function sendToIframe(message) {
	iframe.contentWindow.postMessage(message);
}
window.onmessage = function(e) {
	let message = JSON.parse(e.data);
    if (message.x && message.y) {
		currentLocation = message;
    }
	alert('It works!' + message);
};


</script>
</body>
</html>
